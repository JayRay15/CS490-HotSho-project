###############################################
# Backend .env example for Nirvana ATS         #
# Copy to .env and fill in your values         #
###############################################

# --- Server ---
PORT=5000
# Where your frontend runs from during development
FRONTEND_ORIGIN=http://localhost:5173
# Same as FRONTEND_ORIGIN - used for OAuth redirects (calendar, email links, etc.)
FRONTEND_URL=http://localhost:5173
# Application version for monitoring and release tracking
APP_VERSION=1.0.0

# --- Monitoring & Logging ---
# Sentry DSN for error tracking (get from https://sentry.io)
# Create a Node.js project and copy the DSN from Project Settings > Client Keys
SENTRY_DSN=

# Log level: error, warn, info, http, debug (default: info in production, debug in development)
LOG_LEVEL=info

# Set to true to log request bodies (development only, not recommended for production)
LOG_REQUEST_BODY=false

# Allow test errors endpoint in production (not recommended)
ALLOW_TEST_ERRORS=false

# --- Database ---
# Mongo connection string (use your own user/pass/cluster/db)
MONGO_URI=mongodb+srv://<user>:<password>@<cluster>/<database>?retryWrites=true&w=majority&appName=<appName>

# --- Clerk (Authentication) ---
# Backend requires only the secret key; frontend will use the publishable key
CLERK_SECRET_KEY=sk_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXX
# Optional here (mainly used on the frontend), kept for reference
CLERK_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXXXXXXXX

# --- Email / Deadline Reminders (optional) ---
# Enable daily digest reminders at server start
# Set to true to enable; defaults to false if omitted
ENABLE_DEADLINE_REMINDERS=false

# Enable interview reminders (sent before scheduled interviews)
ENABLE_INTERVIEW_REMINDERS=false

# Enable application automation schedulers
# Application scheduler: runs hourly to process scheduled applications
ENABLE_APPLICATION_SCHEDULER=false
# Follow-up scheduler: runs daily at 10 AM to send follow-up reminders
ENABLE_FOLLOWUP_SCHEDULER=false
# Status automation scheduler: runs daily to check follow-ups, stalled apps, and auto-detect ghosted applications
ENABLE_STATUS_AUTOMATION=false
# Run schedulers immediately on startup (useful for testing)
RUN_SCHEDULER_ON_STARTUP=false
RUN_STATUS_AUTOMATION_ON_STARTUP=false
# Timezone for scheduler (affects when daily jobs run)
TZ=America/New_York

# SMTP settings (leave empty to log mock emails to console)
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM="Nirvana ATS <no-reply@nirvana-ats.local>"

# --- AI Resume Generation ---
# Google Gemini API key for AI-powered resume content generation
GEMINI_API_KEY=your_gemini_api_key_here

# --- Google Calendar Integration ---
# Required for automatic interview syncing to Google Calendar
# Create OAuth 2.0 credentials at: https://console.cloud.google.com/apis/credentials
# 1. Create a new OAuth 2.0 Client ID (Web application)
# 2. Add authorized redirect URI: http://localhost:5000/api/calendar/google/callback (dev)
# 3. Enable the Google Calendar API in your project
GOOGLE_CLIENT_ID=your_google_oauth_client_id
GOOGLE_CLIENT_SECRET=your_google_oauth_client_secret
GOOGLE_REDIRECT_URI=http://localhost:5000/api/calendar/google/callback

# --- Gmail Integration (UC-125: Multi-Platform Application Tracker) ---
# Required for automatic import of job application emails from Gmail
# Uses the same Google OAuth credentials as Calendar (just enable Gmail API too)
# 1. Go to Google Cloud Console > APIs & Services > Library
# 2. Search for "Gmail API" and enable it
# 3. Add redirect URI: http://localhost:5000/api/gmail/callback
GMAIL_REDIRECT_URI=http://localhost:5000/api/gmail/callback

# --- Microsoft/Outlook Calendar Integration (optional) ---
# Required for automatic interview syncing to Outlook Calendar
# Create app at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret
MICROSOFT_REDIRECT_URI=http://localhost:5000/api/calendar/outlook/callback

# --- News API Configuration ---
# NewsAPI.org API key for fetching real company news (free tier: 100 requests/day)
# Get your key at: https://newsapi.org/register
NEWS_API_KEY=your_newsapi_key_here

# Optional: NewsData.io API key for additional news coverage (free tier: 200 requests/day)
# Get your key at: https://newsdata.io/register
NEWSDATA_API_KEY=your_newsdata_key_here

# --- Eventbrite API Configuration ---
# Eventbrite API key for discovering networking events
# Get your private token at: https://www.eventbrite.com/platform/api#/introduction/authentication
# Steps: Sign up -> Create an app -> Get your Private Token (OAuth token)
EVENTBRITE_API_KEY=your_eventbrite_private_token_here

# --- Auth0 (optional: ignore if using Clerk) ---
AUTH0_AUDIENCE=
AUTH0_DOMAIN=

ENABLE_DEADLINE_REMINDERS=true

# Visit https://data.bls.gov/registrationEngine/ to register for API key
LABOR_STATISTICS_KEY = YOUR_KEY_HERE

ENABLE_APPLICATION_SCHEDULER=true
ENABLE_TIMING_SCHEDULER=true
RUN_SCHEDULER_ON_STARTUP=true

ENABLE_REMINDER_EMAILS=true